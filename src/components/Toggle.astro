---
import { SunIcon, MonIcon, SystemIcon } from '../assets/svg';
---

<div class='relative inline-block text-left'>
	<div>
		<button
			type='button'
			id='theme-toggle'
			class='inline-flex w-full justify-center gap-x-1.5 rounded-md bg-section-50 dark:bg-section px-3 py-2 text-sm font-semibold text-font-primary dark:text-font-primary-900 shadow-xs ring-1 ring-section-200 dark:ring-section-700 ring-inset hover:bg-section-100 dark:hover:bg-section-800 transition-colors'
			aria-expanded='false'
			aria-haspopup='true'
			aria-label='Toggle theme'>
			<!-- Current theme icon -->
			<span id='current-theme-icon' class='flex items-center'>
				<!-- Sun Icon (Light Mode) -->
				<span id='sun-icon' class='theme-icon hidden'>
					<SunIcon width={20} height={20} fill='currentColor' />
				</span>
				<!-- Moon Icon (Dark Mode) -->
				<span id='moon-icon' class='theme-icon hidden'>
					<MonIcon width={20} height={20} fill='currentColor' />
				</span>
				<!-- System Icon (System Mode) -->
				<span id='system-icon' class='theme-icon hidden'>
					<SystemIcon width={20} height={20} fill='currentColor' />
				</span>
			</span>
			<!-- Dropdown arrow -->
			<svg
				class='-mr-1 size-5 text-font-light dark:text-font-light-200 transition-transform duration-200'
				id='dropdown-arrow'
				viewBox='0 0 20 20'
				fill='currentColor'
				aria-hidden='true'>
				<path
					fill-rule='evenodd'
					d='M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z'
					clip-rule='evenodd'></path>
			</svg>
		</button>
	</div>

	<!-- Dropdown menu -->
	<div
		id='theme-dropdown'
		class='absolute right-0 z-10 mt-2 w-40 origin-top-right rounded-md bg-section-50 dark:bg-section shadow-lg ring-1 ring-section-200 dark:ring-section-700 focus:outline-hidden opacity-0 scale-95 transform transition-all duration-100 ease-out invisible'
		role='menu'
		aria-orientation='vertical'
		aria-labelledby='theme-toggle'
		tabindex='-1'>
		<div class='py-1' role='none'>
			<button
				type='button'
				data-theme='light'
				class='theme-option flex items-center gap-x-3 w-full px-4 py-2 text-sm text-font-primary dark:text-font-primary-900 hover:bg-section-100 dark:hover:bg-section-800 transition-colors'
				role='menuitem'
				tabindex='-1'>
				<SunIcon width={18} height={18} fill='currentColor' />
				Light
			</button>
			<button
				type='button'
				data-theme='dark'
				class='theme-option flex items-center gap-x-3 w-full px-4 py-2 text-sm text-font-primary dark:text-font-primary-900 hover:bg-section-100 dark:hover:bg-section-800 transition-colors'
				role='menuitem'
				tabindex='-1'>
				<MonIcon width={18} height={18} fill='currentColor' />
				Dark
			</button>
			<button
				type='button'
				data-theme='system'
				class='theme-option flex items-center gap-x-3 w-full px-4 py-2 text-sm text-font-primary dark:text-font-primary-900 hover:bg-section-100 dark:hover:bg-section-800 transition-colors'
				role='menuitem'
				tabindex='-1'>
				<SystemIcon width={18} height={18} fill='currentColor' />
				System
			</button>
		</div>
	</div>
</div>

<script>
	// Import and initialize theme toggle when DOM is ready
	document.addEventListener('DOMContentLoaded', async () => {
		const { initializeThemeToggle } = await import('../utils/themeToggle');
		initializeThemeToggle();
	});
</script>
